// Code generated by protoc-{{name}}. DO NOT EDIT.
// versions:
// source: {{ .InputPath }}

package pb

import (
	"context"
	"github.com/kissprojects/single/comps/go/db"
	"github.com/kissprojects/single/comps/go/db/postgres"
)

type Service struct {
	{{$MessageName}}ServiceServer
	db db.Crud
}

func NewService() Service {
	return Service{db: postgres.Jsonb{}}
}

{{if eq $HasCreateMethod "" }}
func (s *Service) Create(ctx context.Context, req *Create{{$MessageName}}Request) (*Create{{$MessageName}}Response, error) {
	if err := s.db.Create(req.{{$MessageName}}); err != nil {
		return nil, err
	}
	return &Create{{$MessageName}}Response{}, nil
}
{{ end }}